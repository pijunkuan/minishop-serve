(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74ac6624"],{"401f":function(e,s,t){},"4eb4":function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login-background"},[t("div",{staticClass:"login-form"},[t("shop-image",{staticClass:"login-form-avatar",attrs:{width:80,circled:""}},[t("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[t("shop-icon",{staticStyle:{"background-color":"#fff"},attrs:{name:"iconzhucetouxiang"}})],1),t("div",{attrs:{slot:"error"},slot:"error"},[t("shop-icon",{staticStyle:{"background-color":"#fff"},attrs:{name:"iconzhucetouxiang"}})],1)]),"email"===e.regType?t("shop-input",{ref:"email",staticClass:"login-form-input",attrs:{validate:"",rules:e.rules.email},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}},[t("span",{staticClass:"login-prepend",attrs:{slot:"prepend"},slot:"prepend"},[e._v("邮箱")])]):e._e(),"mobile"===e.regType?t("shop-input",{ref:"mobile",staticClass:"login-form-input",attrs:{validate:"",rules:e.rules.mobile},model:{value:e.user.mobile,callback:function(s){e.$set(e.user,"mobile",s)},expression:"user.mobile"}},[t("span",{staticClass:"login-prepend",attrs:{slot:"prepend"},slot:"prepend"},[e._v("手机号")])]):e._e(),t("shop-input",{ref:"verification",staticClass:"login-form-input verify-input",attrs:{type:e.passType,validate:"",rules:e.rules.verification_code},model:{value:e.user.verification_code,callback:function(s){e.$set(e.user,"verification_code",s)},expression:"user.verification_code"}},[t("span",{staticClass:"login-prepend",attrs:{slot:"prepend"},slot:"prepend"},[e._v("验证码")]),t("span",{attrs:{slot:"append"},on:{click:e.getVerify},slot:"append"},[e._v(" "+e._s(e.code_tip)+" ")]),t("span",{attrs:{slot:"append"},on:{click:function(s){e.passType="password"}},slot:"append"},["text"===e.passType?t("shop-icon",{attrs:{name:"yanjing",size:"mini"}}):e._e()],1)]),t("shop-input",{ref:"password",staticClass:"login-form-input",attrs:{type:e.passType,validate:"",rules:e.rules.password},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}},[t("span",{staticClass:"login-prepend",attrs:{slot:"prepend"},slot:"prepend"},[e._v("密码")]),t("span",{attrs:{slot:"append"},on:{click:function(s){e.passType="text"}},slot:"append"},["password"===e.passType?t("shop-icon",{attrs:{name:"yanjing-bi",size:"mini"}}):e._e()],1),t("span",{attrs:{slot:"append"},on:{click:function(s){e.passType="password"}},slot:"append"},["text"===e.passType?t("shop-icon",{attrs:{name:"yanjing",size:"mini"}}):e._e()],1)]),t("shop-button",{staticClass:"login-form-button",class:{"is-loading":e.btnLoading},on:{click:e.confirmLogin}},[e._v("注 册")]),t("div",{staticClass:"login-form-bottom"},[t("div",[e._v("已有账号？"),t("div",{staticClass:"bottom-btn",on:{click:e.toLogin}},[e._v("登录")])])])],1)])},o=[],a=t("76a0"),n=t("7ded"),r={data:function(){return{regType:"mobile",user:{email:"",mobile:"",password:"",verification_code:""},passType:"password",rules:{email:[{required:!0,message:"请输入邮箱"}],mobile:[{required:!0,message:"请输入手机号"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少为6位"}],verification_code:[{required:!0,message:"请输入验证码"},{len:4,message:"验证码为4位"}]},btnLoading:!1,code_tip:"获取验证码",time:30,codeLoading:!1}},methods:{changeType:function(e,s){this.$refs[e].clearValidate(),this.regType=s},toLogin:function(){this.$router.push({name:"Login"})},toForget:function(){this.$router.push({name:"Forget"})},getVerify:function(){this.codeLoading||(this.codeLoading=!0,this.$refs.verification.clearValidate(),this.verifyLoading=!0,this.code_tip=this.time+"s后重试",this.timeOut(),Object(n["c"])({mobile:this.user.mobile}).then((function(){Object(a["Toast"])("验证码已发送至手机，请及时查收")})))},timeOut:function(){var e=this;if(0===this.time)return this.code_tip="获取验证码",this.time=30,void(this.codeLoading=!1);setTimeout((function(){e.time--,e.code_tip=e.time+"s后重试",e.timeOut()}),1e3)},confirmLogin:function(){var e=this;this.btnLoading||this.$refs.mobile.validation((function(s){e.$refs.password.validation((function(t){e.$refs.verification.validation((function(i){s&&t&&i&&(e.btnLoading=!0,e.register())}))}))}))},register:function(){var e=this,s={mobile:this.user.mobile,password:this.user.password,password_confirmation:this.user.password,verification_code:this.user.verification_code};Object(n["f"])(s).then((function(){Object(a["Toast"])({message:"注册成功，正在跳转登录中...",duration:2e3}),e.$store.dispatch("login",{mobile:e.user.mobile,password:e.user.password}).then((function(){"Login"===e.$route.query.from||void 0===e.$route.query.from?e.$router.push({name:"UserHome"}):e.$router.push({name:e.$route.query.from})})),setTimeout((function(){e.$refs.mobile.clearValidate(),e.$refs.password.clearValidate(),e.$refs.verification.clearValidate(),e.btnLoading=!1}),2e3)})).catch((function(s){Object(a["Toast"])({message:s.response.data.message,duration:2e3}),e.btnLoading=!1}))}}},c=r,l=(t("e774"),t("f833"),t("2877")),p=Object(l["a"])(c,i,o,!1,null,"01fbce90",null);s["default"]=p.exports},bc24:function(e,s,t){},e774:function(e,s,t){"use strict";var i=t("401f"),o=t.n(i);o.a},f833:function(e,s,t){"use strict";var i=t("bc24"),o=t.n(i);o.a}}]);