(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b19140c"],{1456:function(t,e,n){},"24c3":function(t,e,n){"use strict";var r=n("1456"),o=n.n(r);o.a},"2d8c":function(t,e,n){},"4de4":function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").filter,s=n("1dde"),i=n("ae40"),a=s("filter"),d=i("filter");r({target:"Array",proto:!0,forced:!a||!d},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"5b85":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("shop-popup",{attrs:{size:"medium",full:"",show:t.refundShow},on:{close:t.closeRefund}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("退换货")]),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"refund-info"},[n("div",[t._v("订单号："+t._s(t.order.no))]),n("div",[t._v("当前状态："+t._s(t.order.status_value))]),n("div",[t._v("金额：¥ "+t._s(t.order.amount))])]),n("div",{staticClass:"refund-reason"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("选择退单原因")]),t._l(t.reasons,(function(e,r){return n("div",{key:r},[n("shop-radio",{attrs:{label:e},model:{value:t.refundReason,callback:function(e){t.refundReason=e},expression:"refundReason"}})],1)})),"其他原因"===t.refundReason?n("div",[n("div",{staticStyle:{margin:"30px 0 10px"}},[t._v("请填写具体原因")]),n("shop-input",{attrs:{rounded:!1},model:{value:t.reasonDetail,callback:function(e){t.reasonDetail=e},expression:"reasonDetail"}})],1):t._e()],2)]),n("div",{staticClass:"pay-popup-button",attrs:{slot:"button"},slot:"button"},[n("div",[n("shop-button",{attrs:{type:"border",rounded:!1},on:{click:t.closeRefund}},[t._v("关闭")])],1),n("div",[n("shop-button",{attrs:{rounded:!1,loading:t.btnLoading,disabled:t.btnLoading},on:{click:t.confirmRefund}},[t._v("确定")])],1)])])},o=[],s=n("76a0"),i=n("f8b7"),a={props:{refundShow:Boolean,order:Object},data:function(){return{reasons:["订单信息有误","物流太慢","不想要了","其他原因"],refundReason:"订单信息有误",reasonDetail:"",btnLoading:!1}},methods:{closeRefund:function(){this.refundReason="订单信息有误",this.reasonDetail="",this.$emit("close")},confirmRefund:function(){var t=this;if(!this.btnLoading){this.btnLoading=!0;var e="";e="其他原因"===this.refundReason?this.refundReason+" "+this.reasonDetail:this.refundReason,Object(i["b"])(this.order.no,{status:"refunding",reason:e}).then((function(){Object(s["Toast"])("退款申请已发送，请等待商家处理"),t.closeRefund(),t.$emit("confirm")})).catch((function(){t.btnLoading=!1}))}}}},d=a,c=(n("b410"),n("2877")),u=Object(c["a"])(d,r,o,!1,null,"55729df6",null);e["a"]=u.exports},"9d03":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("shop-popup",{attrs:{size:"medium",show:t.payShow},on:{close:t.closePay}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("选择支付方式")]),n("div",{attrs:{slot:"content"},slot:"content"},[n("mt-picker",{ref:"pays",attrs:{slots:t.slots}})],1),n("div",{staticClass:"pay-popup-button",attrs:{slot:"button"},slot:"button"},[n("div",[n("shop-button",{attrs:{type:"border",rounded:!1},on:{click:t.closePay}},[t._v("取消支付")])],1),n("div",[n("shop-button",{attrs:{rounded:!1,disabled:t.btnLoading},on:{click:t.confirmPay}},[t._v("确认支付")])],1)])])},o=[],s=(n("d81d"),n("d3b7"),n("ddb0"),n("b933")),i=n("f8b7"),a={props:{payShow:Boolean,orderNo:String},data:function(){return{payments:[],slots:[{flex:1,values:[],textAlign:"center"}],btnLoading:!1}},created:function(){this.getPayments()},methods:{getPayments:function(){var t=this;Object(s["b"])().then((function(e){t.payments=e.data.body,t.payments.map((function(e){t.slots[0].values.push(e.title)}))}))},closePay:function(){this.$emit("close")},confirmPay:function(){var t=this;if(!this.btnLoading){this.btnLoading=!0;var e="";this.payments.map((function(n){n.title===t.$refs.pays.values[0]&&(e=n.code)})),Object(i["d"])(this.orderNo,e).then((function(e){"success"===e.data.body.status?t.$router.push({name:"Checksuc",query:{no:t.orderNo}}):location.href=e.data.body.pay_url})).catch((function(){t.btnLoading=!1}))}}}},d=a,c=(n("e1ed"),n("2877")),u=Object(c["a"])(d,r,o,!1,null,"e2ed6302",null);e["a"]=u.exports},b410:function(t,e,n){"use strict";var r=n("2d8c"),o=n.n(r);o.a},c8f4:function(t,e,n){},d818:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-loading",{attrs:{loading:t.loading}}),n("div",{staticClass:"order-detail-content",style:{height:t.height+"px"}},[n("div",{staticClass:"order-detail-header"},[n("div",[n("div",[t._v(t._s(t.order.refund_status?t.order.refund_status_value:t.order.status_value))]),t.loading||t.order.refund_status?t._e():n("div",{staticClass:"order-detail-header-content"},[t._v(t._s(void 0!==t.statusTip[t.order.status]?t.statusTip[t.order.status].tip:""))]),!t.loading&&t.order.refund_status?n("div",{staticClass:"order-detail-header-content"},[t._v(t._s(t.statusTip[t.order.refund_status].tip))]):t._e()]),n("div",[t.loading||"refunding"===t.order.refund_status?t._e():n("i",{staticClass:"iconfont",class:void 0!==t.statusTip[t.order.status]?t.statusTip[t.order.status].icon:""}),t.loading||"refunding"!==t.order.refund_status?t._e():n("i",{staticClass:"iconfont",class:t.statusTip["refunding"].icon})])]),n("div",{staticStyle:{position:"relative"}},[n("div",{staticClass:"order-detail-basic"},[n("div",[n("shop-icon",{attrs:{name:"dingwei",size:"small"}})],1),n("div",[n("div",[n("strong",[t._v(t._s(t.order.address.name))])]),n("div",[n("strong",[t._v(t._s(t.order.address.mobile))])]),n("div",{staticClass:"order-detail-basic__address"},[t._v(t._s(t.order.address.address))])])])]),n("div",{staticClass:"order-detail-items"},[t._m(0),t._l(t.order.items,(function(e,r){return n("div",{key:r,staticClass:"order-detail-items-item",on:{click:function(n){return t.toItem(e)}}},[n("div",[n("shop-image",{attrs:{src:e.img_url,type:"stretch",width:60,rounded:""}},[n("div",{staticClass:"order-detail-item-placeholder",attrs:{slot:"error"},slot:"error"}),n("div",{staticClass:"order-detail-item-placeholder",attrs:{slot:"placeholder"},slot:"placeholder"})])],1),n("div",[n("div",{staticClass:"order-detail-items-item__title"},[t._v(t._s(e.product_title))]),n("div",{staticClass:"order-detail-items-item__subtitle"},[t._v(t._s(e.variant_title))]),n("div",{staticClass:"order-detail-items-item__price"},[t._v("¥ "),n("strong",[t._v(t._s(e.price))])]),n("div",{staticClass:"order-detail-items-item__amount"},[t._v("x "+t._s(e.quantity))])])])})),n("div",{staticClass:"order-detail-items-service"},[n("shop-icon",{attrs:{name:"kefu",size:"small"}}),t._v("联系客服")],1)],2),n("div",{staticClass:"order-detail-info"},[n("div",[t._m(1),n("div",[t._v(t._s(t.$route.query.no))])]),n("div",[t._m(2),n("div",[t._v(t._s(t.order.created_at))])]),n("div",[t._m(3),n("div",[0===t.order.payments.length?n("div",[t._v(" - ")]):t._e(),t._l(t.order.payments,(function(e,r){return n("div",{key:r,staticClass:"order-item-list"},[n("div",[t._v(t._s(e.payment_method_value))])])}))],2)]),t.order.pay_at?n("div",[t._m(4),n("div",[t._v(t._s(t.order.pay_at))])]):t._e(),n("div",[t._m(5),n("div",[0===t.order.shipments.length?n("div",[t._v(" - ")]):t._e(),t._l(t.order.shipments,(function(e,r){return n("div",{key:r,staticClass:"order-item-list"},[n("div",[t._v(t._s(e.shipment_company))]),n("div",[n("strong",[t._v(t._s(e.shipment_no))])]),n("div",[t._v(t._s(e.created_at))])])}))],2)]),t.order.send_at?n("div",[t._m(6),n("div",[t._v(t._s(t.order.send_at))])]):t._e(),t.order.closed_reason?n("div",[t._m(7),n("div",[t._v(t._s(t.order.closed_reason))])]):t._e(),t.order.closed_at?n("div",[t._m(8),n("div",[t._v(t._s(t.order.closed_at))])]):t._e(),t.order.refund_reason?n("div",[t._m(9),n("div",[t._v("【退单申请原因】："+t._s(t.order.refund_reason))])]):t._e(),t.order.refund_at?n("div",[t._m(10),n("div",[t._v(t._s(t.order.refund_at))])]):t._e()]),n("div",{staticClass:"order-detail-price"},[n("div",[t._m(11),n("div",[t._v("¥ "),n("strong",[t._v(t._s(t.order.items_amount?t.order.items_amount:"-"))])])]),n("div",[t._m(12),n("div",[t._v("¥ "),n("strong",[t._v(t._s(t.order.shipments_amount?t.order.shipments_amount:"-"))])])]),n("div",[t._m(13),n("div",[t._v("¥ "),n("strong",[t._v(t._s(t.order.discounts_amount?t.order.discounts_amount:"-"))])])]),n("div",[n("div",[t._v("共 "+t._s(t.order.total_quantity?t.order.total_quantity:"-")+" 件商品，合计："),n("span",[t._v("¥ "),n("strong",[t._v(t._s(t.order.amount?t.order.amount:"-"))])])])])])]),-1===t.footerFold.indexOf(t.order.status)?n("div",{staticClass:"order-detail-bottom"},[-1!==t.canClose.indexOf(t.order.status)?n("shop-button",{attrs:{size:"small"},on:{click:function(e){t.payShow=!0}}},[t._v("支付订单")]):t._e(),-1!==t.canShip.indexOf(t.order.status)?n("shop-button",{attrs:{size:"small"}},[t._v("查看物流")]):t._e(),-1!==t.canReceive.indexOf(t.order.status)?n("shop-button",{attrs:{size:"small",disabled:t.receiveLoading},on:{click:t.toReceive}},[t._v("确认收货")]):t._e(),-1!==t.canRefund.indexOf(t.order.status)&&"refunding"!==t.order.refund_status?n("shop-button",{attrs:{size:"small"},on:{click:t.toRefund}},[t._v("退换货")]):t._e(),"refunding"===t.order.refund_status?n("shop-button",{attrs:{size:"small"},on:{click:t.seeRefund}},[t._v("查看退换货")]):t._e(),-1!==t.canClose.indexOf(t.order.status)?n("shop-button",{attrs:{size:"small",disabled:t.btnLoading},on:{click:t.toClose}},[t._v("关闭订单")]):t._e()],1):t._e(),n("refund-popup",{attrs:{refundShow:t.refundShow,order:t.currentOrder},on:{close:function(e){t.refundShow=!1},confirm:t.getDetail}}),n("pay-popup",{attrs:{payShow:t.payShow,orderNo:t.$route.query.no},on:{close:function(e){t.payShow=!1},confirm:t.getDetail}})],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("订单详情")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("订单编号")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("下单时间")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("支付方式")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("支付时间")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("配送信息")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("配送时间")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("关闭原因")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("关闭时间")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("退单事项")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("退单时间")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("商品总额")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("运费")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("优惠")])])}],s=(n("4de4"),n("c975"),n("d81d"),n("b0c0"),n("f8b7")),i=n("76a0"),a=n("5b85"),d=n("9d03"),c={components:{RefundPopup:a["a"],PayPopup:d["a"]},data:function(){return{loading:!1,height:0,order:{address:{},items:[],payments:[],shipments:[]},btnLoading:!1,statusTip:{pending:{tip:"您拍下的宝贝未支付，还在等着您哦～",icon:"icondaifukuan"},processing:{tip:"订单已经接收，正在抓紧为您包装理货",icon:"icondaifahuo"},sent:{tip:"包裹已经坐上火箭朝您飞来～",icon:"iconwuliu"},partial:{tip:"部分宝贝已经坐上火箭朝您飞来，剩下的也在加紧准备出发～",icon:"iconwuliu"},refunding:{tip:"退换货正在处理中",icon:"iconshouhou"},refunded:{tip:"已处理退换货",icon:"iconjianshao2"},cancel:{tip:"订单已经取消",icon:"iconjianshao2"},closed:{tip:"订单已经关闭",icon:"iconjianshao2"},success:{tip:"宝贝已经到达，期待您留下宝贵意见",icon:"icondaishouhuo"}},footerFold:["refunding","refunded","cancel","closed"],canClose:["pending"],canShip:["sent","partial","success"],canRefund:["processing","sent","partial","success"],canReceive:["sent","partial"],refundShow:!1,redetailShow:!1,canLoading:!1,currentOrder:{},payShow:!1,receiveLoading:!1}},created:function(){this.getDetail()},beforeRouteLeave:function(t,e,n){"UserOrder"===t.name?t.meta.keepAlive=!0:t.meta.keepAlive=!1,n()},methods:{getDetail:function(){var t=this;this.loading=!0,Object(s["e"])(this.$route.query.no).then((function(e){t.order=e.data.body,t.order["total_quantity"]=0,t.order.items.map((function(e){t.order.total_quantity+=e.quantity})),t.order.payments=t.order.payments.filter((function(t){return"success"===t.status})),-1!==t.footerFold.indexOf(t.order.status)?t.height=window.innerHeight-49:t.height=window.innerHeight-95,t.loading=!1})).catch((function(e){t.loading=!1,401===e.response.status&&(t.$store.dispatch("logout"),t.$router.push({name:"Login",query:{from:"UserOrder"}}))}))},toClose:function(){var t=this;i["MessageBox"].confirm("是否确认关闭?").then((function(){t.btnLoading=!0,Object(s["b"])(t.$route.query.no,{status:"cancel"}).then((function(){Object(i["Toast"])("订单已关闭"),t.getDetail(),t.btnLoading=!1}))})).catch((function(){}))},toRefund:function(){this.refundShow=!0,this.currentOrder={no:this.$route.query.no,status_value:this.order.status_value,amount:this.order.amount}},seeRefund:function(){this.redetailShow=!0},closeRedetail:function(){this.redetailShow=!1},cancelRefund:function(){var t=this;this.canLoading||(this.canLoading=!0,Object(s["b"])(this.$route.query.no,{status:"refund_cancel"}).then((function(){Object(i["Toast"])("退单已取消"),t.closeRedetail(),t.getDetail(),t.canLoading=!1})).catch((function(){t.canLoading=!1})))},toReceive:function(){var t=this;i["MessageBox"].confirm("是否确认收货?").then((function(){t.receiveLoading=!0,Object(s["b"])(t.$route.query.no,{status:"success"}).then((function(){Object(i["Toast"])("已确认收货"),t.getDetail(),t.receiveLoading=!1}))})).catch((function(){}))},toItem:function(t){this.$router.push({name:"Product",params:{id:t.product_id}})}}},u=c,l=(n("24c3"),n("2877")),v=Object(l["a"])(u,r,o,!1,null,"e5b65da8",null);e["default"]=v.exports},e1ed:function(t,e,n){"use strict";var r=n("c8f4"),o=n.n(r);o.a},f8b7:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return c}));var r=n("b775");function o(t){return Object(r["a"])({url:"order/calc",method:"post",data:t})}function s(t){return Object(r["a"])({url:"order",method:"post",data:t})}function i(t,e){return Object(r["a"])({url:"order/"+t+"/pay/"+e,method:"post"})}function a(t){return Object(r["a"])({url:"order",method:"get",params:t})}function d(t){return Object(r["a"])({url:"order/"+t,method:"get"})}function c(t,e){return Object(r["a"])({url:"order/"+t,method:"put",data:e})}}}]);